import React, { useState } from 'react';
import './Chat.css';
import UsersList from './features/UsersList/UsersList';
import UserChat from './features/UserChat/UserChat';

function Chat() {
    const [selectedUser, setSelectedUser] = useState(null);

    const users = [
        { name: "Benoit", lastMessage: "Je ne suis pas là", date: "Today: 17:50" },
        { name: "Armand", lastMessage: "Arrête de dire que je suis aigri", date: "Today: 16:30" },
        { name: "Dorian", lastMessage: "J'adore le grappling", date: "Today: 14:50" },
        { name: "Heliam", lastMessage: "Contacte mon manager : chatgpt.com", date: "Today: 12:00" },
        { name: "Emile", lastMessage: "Black ops 6", date: "Today: 11:00" },
    ];

    const handleUserClick = (user) => {
        setSelectedUser(user);
    };

    return (
            <div className="chat-component">
                <UsersList users={users} onUserClick={handleUserClick} />
                <UserChat selectedUser={selectedUser} />
            </div>
    );
}

export default Chat;

import React from 'react';
import Message from '../../components/Message/Message';
import './UserChat.css'

function UserChat({ selectedUser }) {
    return (
        <div className="chat-window">
            {selectedUser ? (
                <Message user={selectedUser} />
            ) : (
                <p>Sélectionnez un utilisateur pour commencer à discuter.</p>
            )}
        </div>
    );
}

export default UserChat;

import React from 'react';
import User from '../../components/User/User';

function UsersList({ users, onUserClick }) {
    return (
        <div className="users-list">
            {users.map((user, index) => (
                <User
                    key={index}
                    name={user.name}
                    lastMessage={user.lastMessage}
                    date={user.date}
                    onClick={() => onUserClick(user)}
                />
            ))}
        </div>
    );
}

export default UsersList;

import React from 'react';
import './User.css';

function User({ name, lastMessage, date, onClick }) {
    return (
        <div className="user" onClick={onClick}>
            <i className="fa-solid fa-user"></i>
            <div className="user-details">
                <div className="user-name">{name}</div>
                <div className="last-message">{lastMessage}</div>
            </div>
            <div className="message-date">{date}</div>
        </div>
    );
}

export default User;

import React, { useState, useEffect } from 'react';
import './Message.css';

function Message({ user }) {
    const [messages, setMessages] = useState([
        { sender: "Benoit", text: "Salut, comment ça va ?" },
        { sender: "Moi", text: "Bien et toi ?" },
    ]);
    const [newMessage, setNewMessage] = useState("");
    const [serverMessage, setServerMessage] = useState("");

    useEffect(() => {
        fetch(' ')
            .then((response) => response.json())
            .then((data) => {
                setServerMessage(data.message);
            })
            .catch((error) => {
                console.error("Erreur lors de la récupération des données : ", error);
            });
    }, []);

    const handleSendMessage = () => {
        if (newMessage.trim()) {
            setMessages([...messages, { sender: "Moi", text: newMessage }]);
            setNewMessage("");
        }
    };

    return (
        <div className="message-component">
            <div className="message-header">
                <h2>MatChatter avec {user.name}</h2>
                {serverMessage && <p>{serverMessage}</p>}  {}
            </div>
            <div className="messages">
                {messages.map((msg, index) => (
                    <div key={index} className={`message ${msg.sender === "Moi" ? "sent" : "received"}`}>
                        <div className="message-text">{msg.text}</div>
                    </div>
                ))}
            </div>
            <div className="message-input">
                <input
                    type="text"
                    value={newMessage}
                    onChange={(e) => setNewMessage(e.target.value)}
                    placeholder="Message..."
                />
                <button onClick={handleSendMessage}><i className="fa-solid fa-arrow-up"></i></button>
            </div>
        </div>
    );
}

export default Message;
